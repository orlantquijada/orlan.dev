---
import { Icon } from 'astro-icon/components'

import BrowserBox from './BrowserBox.astro'
import Video from './Video.tsx'
import ProjectsCarousel from './ProjectsCarousel.tsx'
---

<ProjectsCarousel client:load numOfItems={2}>
  <div
    class:list={[
      'w-[var(--itemWidth)]',
      'md:absolute md:bottom-0 md:left-[initial] md:right-0 md:top-[initial] md:z-10 md:max-w-lg',
    ]}
  >
    <BrowserBox
      title="Daily Stoic"
      aspect="desktop"
      href="https://daily.orlan.dev"
      className="self-stretch relative group"
    >
      <Video src="/stoic-demo.mp4" client:idle>
        <Icon name="pause" slot="pausedIcon" />
        <Icon name="play" slot="playingIcon" />
      </Video>
    </BrowserBox>
  </div>

  <div
    class:list={[
      'w-[var(--itemWidth)]',
      'md:absolute md:left-0 md:top-0 md:max-w-xs md:hover:z-10',
    ]}
  >
    <BrowserBox
      title="Money Manager"
      aspect="phone"
      href="https://github.com/orlantquijada/money-manager"
    >
      <Video src="/stoic-demo.mp4" client:idle>
        <Icon name="pause" slot="pausedIcon" />
        <Icon name="play" slot="playingIcon" />
      </Video>
    </BrowserBox>
  </div>
</ProjectsCarousel>

<style>
  :where(.browser-container) {
    --header-height: 2.5rem;
    --header-gap: 2.5rem;
    --content-gap: 1rem;
    --stack: 0;
    --top: calc(
      var(--header-gap) + var(--header-height) + var(--content-gap) +
        (var(--stack) * 0.5rem)
    );

    position: sticky;
    left: 0;
    top: var(--top);
  }
</style>
